$(document).ready(function(){var t=function(){$("body").css("margin-bottom",$(".page__footer").outerHeight(!0))};t(),$(window).resize(jQuery.throttle(250,function(){t()})),$("#main").fitVids();var e=function(){(0===$(".author__urls-wrapper button").length?1024<$(window).width():!$(".author__urls-wrapper button").is(":visible"))?$(".sidebar").addClass("sticky"):$(".sidebar").removeClass("sticky")};e(),$(window).resize(function(){e()}),$(".author__urls-wrapper button").on("click",function(){$(".author__urls").toggleClass("is--visible"),$(".author__urls-wrapper button").toggleClass("open")}),$(".search__toggle").on("click",function(){$(".search-content").toggleClass("is--visible"),$(".initial-content").toggleClass("is--hidden"),setTimeout(function(){$(".search-content input").focus()},400)});var n=!1;$(window).bind("popstate",function(){$.smoothScroll({scrollTarget:location.hash,offset:-20,beforeScroll:function(){n=!0},afterScroll:function(){n=!1}})}),$('a[href*="#"]').bind("click",function(t){this.pathname===location.pathname&&this.hash&&(t.preventDefault(),history.pushState(null,null,this.hash),$(window).trigger("popstate"))}),location.hash&&$(window).trigger("popstate"),$(window).scroll(jQuery.throttle(250,function(){if(!n){var t=$(window).scrollTop()+20+1,i=[];$("nav.toc a").each(function(){var t=$(this),e=t.attr("href");if(e&&"#"==e[0]){var a=$(e);i.push({link:t,href:e,top:a.offset().top}),t.removeClass("active")}});for(var e=0;e<i.length;e++){var a=i[e].top,o=e<i.length-1?i[e+1].top:Infinity;if(a<=t&&t<o)return i[e].link.parents("li").children("a").addClass("active"),void(i[e].href!==location.hash&&history.replaceState(null,null,i[e].href))}"#"!==location.hash&&history.replaceState(null,null,"#")}})),$("a[href$='.jpg'],a[href$='.jpeg'],a[href$='.JPG'],a[href$='.png'],a[href$='.gif']").addClass("image-popup"),$(".image-popup").magnificPopup({type:"image",tLoading:"Loading image #%curr%...",gallery:{enabled:!0,navigateByImgClick:!0,preload:[0,1]},image:{tError:'<a href="%url%">Image #%curr%</a> could not be loaded.'},removalDelay:500,mainClass:"mfp-zoom-in",callbacks:{beforeOpen:function(){this.st.image.markup=this.st.image.markup.replace("mfp-figure","mfp-figure mfp-with-anim")}},closeOnContentClick:!0,midClick:!0})});